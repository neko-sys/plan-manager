# 番茄钟应用实现计划

## 设计方向
采用 **温暖专注** 的设计美学 - 以番茄红色为主色调，搭配温暖的橙黄色渐变，营造专注而舒适的氛围。使用圆形进度环作为核心视觉元素，搭配微妙的脉动动画增强沉浸感。

## 文件结构规划

### 1. 领域模型 (`src/domain/pomodoro.ts`)
- `PomodoroSession` - 番茄钟会话记录
- `PomodoroSettings` - 番茄钟设置
- `PomodoroStats` - 统计数据
- `TimerPhase` - 计时阶段枚举 (work/shortBreak/longBreak)

### 2. 状态管理 (`src/store/pomodoroStore.ts`)
- 计时器状态 (时间、阶段、运行状态)
- 番茄钟记录管理
- 设置持久化
- 统计数据计算

### 3. 核心组件 (`src/components/pomodoro/`)
- `TimerRing.tsx` - 圆形进度环计时器
- `TimerControls.tsx` - 开始/暂停/重置控制
- `PhaseSelector.tsx` - 阶段切换 (工作/短休息/长休息)
- `TaskPicker.tsx` - 任务选择器
- `PomodoroStats.tsx` - 统计图表
- `PomodoroSettings.tsx` - 设置面板
- `NotificationToggle.tsx` - 提醒设置

### 4. 提醒系统 (`src/application/notifications.ts`)
- 声音提醒 (Web Audio API)
- 桌面通知 (Notification API)
- 震动提醒 (Vibration API)

### 5. 数据导出 (`src/application/export.ts`)
- JSON 导出
- CSV 导出

## 实现步骤

### Phase 1: 基础架构
1. 创建番茄钟领域模型和类型定义
2. 创建番茄钟状态管理 Store
3. 添加 i18n 翻译支持

### Phase 2: 核心计时器
4. 实现圆形进度环组件
5. 实现计时控制逻辑
6. 实现阶段切换功能

### Phase 3: 任务集成
7. 实现任务选择器
8. 实现番茄钟与任务关联
9. 自动更新任务已耗工时

### Phase 4: 统计分析
10. 实现统计计算逻辑
11. 实现统计图表组件 (柱状图/热力图)
12. 实现日/周/月视图切换

### Phase 5: 提醒系统
13. 实现声音提醒
14. 实现桌面通知
15. 实现震动提醒

### Phase 6: 设置与导出
17. 实现设置面板
18. 实现数据导出功能
19. 集成到主应用导航

## 视觉设计
- 主色: `oklch(0.65 0.22 25)` (番茄红)
- 辅色: `oklch(0.75 0.18 50)` (温暖橙)
- 进度环: 渐变填充 + 发光效果
- 动画: 脉动呼吸效果 + 平滑过渡
- 字体: 使用现有系统字体，强调数字显示